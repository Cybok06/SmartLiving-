<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Agent Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://res.cloudinary.com/dljpgzbto/image/upload/v1743993646/company-logo_dksb23.jpg" type="image/png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            transition: background-color 0.3s, color 0.3s;
        }

        .dark-mode {
            background-color: #121212 !important;
            color: #f1f1f1;
        }

        .dark-mode .card {
            background-color: #1e1e1e;
        }

        .navbar-brand img {
            height: 35px;
            margin-right: 10px;
        }

        .profile-header img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
        }

        .toggle-btn {
            background-color: #ffc107;
            color: black;
        }

        .edit-btn {
            background-color: #007BFF;
        }

        .edit-btn, .toggle-btn {
            border: none;
            border-radius: 5px;
            padding: 8px 14px;
            color: white;
            font-weight: bold;
        }

        .dark-mode .btn {
            color: white !important;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container-fluid px-3">
        <a class="navbar-brand d-flex align-items-center" href="{{ url_for('manager_dashboard.manager_dashboard_view') }}">
            <img src="https://res.cloudinary.com/dljpgzbto/image/upload/v1743993646/company-logo_dksb23.jpg" alt="Logo"> Dashboard
        </a>
        <button class="btn btn-outline-dark btn-sm" onclick="toggleDarkMode()" id="modeToggle">ðŸŒ™</button>
    </div>
</nav>

<!-- Profile Card -->
<div class="container mt-4">
    <div class="card shadow p-4">
        <div class="text-center profile-header">
            <img src="{{ agent.image_url or 'https://via.placeholder.com/100' }}" alt="Agent Image">
            <h2 class="mt-2">{{ agent.name }}</h2>
        </div>
        <div class="row mt-4">
            <div class="col-md-6">
                <p><strong>Username:</strong> {{ agent.username }}</p>
                <p><strong>Phone:</strong> {{ agent.phone }}</p>
                <p><strong>Email:</strong> {{ agent.email }}</p>
                <p><strong>Gender:</strong> {{ agent.gender }}</p>
                <p><strong>Branch:</strong> {{ agent.branch }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Position:</strong> {{ agent.position }}</p>
                <p><strong>Location:</strong> {{ agent.location }}</p>
                <p><strong>Start Date:</strong> {{ agent.start_date }}</p>
                <p><strong>Status:</strong> {{ agent.status }}</p>
                <p><strong>Date Registered:</strong> {{ agent.date_registered }}</p>
            </div>
        </div>
        <p><strong>Assets:</strong> {{ agent.assets | join(', ') }}</p>
        <p><strong>Password Hash:</strong> {{ agent.password }}</p>

        <div class="mt-4 d-flex gap-2">
            <form action="{{ url_for('login.toggle_agent_status', agent_id=agent._id) }}" method="post">
                <button class="toggle-btn" type="submit">
                    {{ 'Deactivate' if agent.status == 'Active' else 'Activate' }}
                </button>
            </form>
            <a href="{{ url_for('login.edit_agent', agent_id=agent._id) }}">
                <button class="edit-btn">Edit</button>
            </a>
        </div>
    </div>
</div>

<script>
    function toggleDarkMode() {
        const body = document.body;
        const toggleBtn = document.getElementById('modeToggle');
        body.classList.toggle('dark-mode');
        toggleBtn.textContent = body.classList.contains('dark-mode') ? 'ðŸŒž' : 'ðŸŒ™';
    }
</script>
{% include 'app_footer.html' %}

</body>
</html>

